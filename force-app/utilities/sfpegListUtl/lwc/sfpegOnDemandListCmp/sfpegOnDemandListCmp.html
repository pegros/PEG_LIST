<template>
    <!-- STANDARD FINAL STATE - LIST DISPLAY -->
    <template lwc:if={isOpen}>
        <c-sfpeg-list-cmp   object-api-name={objectApiName}
                            record-id={recordId}
                            card-title={cardTitle}
                            card-icon={cardIcon}
                            card-class={cardClass}
                            button-size={buttonSize}
                            config-name={configName}
                            action-config-name={actionConfigName}
                            footer-config-name={footerConfigName}
                            context-string={contextString}
                            show-count={showCount}
                            show-search={showSearch}
                            show-export={showExport}
                            display-height={displayHeight}
                            max-size={maxSize}
                            is-collapsible={isCollapsible}
                            is-collapsed={isCollapsed}
                            is-debug={isDebug}
                            is-debug-fine={isDebugFine} >
        </c-sfpeg-list-cmp>
    </template>

    <!-- STANDARD INITIAL STATE - CARD HEADER DISPLAY -->
    <template lwc:else >
        <div class={cardClass} >
            <lightning-card class="cardHeader" title={cardTitle} icon-name={cardIcon}>
                <div class="headerActions" slot="actions">
                    <template lwc:if={buttonLabel}>
                        <lightning-button
                                label={buttonLabel}         title={expandTitle}
                                icon-name="utility:expand"  icon-position="right"
                                variant="border-filled"     size={buttonSize}
                                onclick={handleOpen}>
                        </lightning-button>
                    </template>
                    <template lwc:else>
                        <lightning-button-icon
                                icon-name="utility:expand"  title={expandTitle}
                                variant="border-filled"     size={buttonSize}
                                onclick={handleOpen}>
                        </lightning-button-icon>
                    </template>
                </div>

                <template lwc:if={isDebug}>
                    <div slot="footer" class="footerContent">
                        <div class="debugInfo"  >
                           <dl class="slds-dl_horizontal">
                                <dt class="slds-dl_horizontal__label slds-truncate">Configuration</dt>
                                <dd class="slds-dl_horizontal__detail">Query:&nbsp;{configName}</dd>
                                <dt class="slds-dl_horizontal__label slds-truncate">Documentation:</dt>
                                <dd class="slds-dl_horizontal__detail">
                                    <lightning-formatted-url    value="https://github.com/pegros/PEG_LIST/blob/master/help/sfpegListPkgUtilities.md"
                                                                label="See Help on GitHub"
                                                                target="_blank">
                                    </lightning-formatted-url>
                                </dd>
                            </dl>
                        </div>
                    </div>
                </template>
            </lightning-card>
        </div>
    </template>
</template>